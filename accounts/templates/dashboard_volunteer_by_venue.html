{% extends 'main.html' %}

{% block content %}

{% if user.is_authenticated %}
    <h1>Volunteer Dashboard</h1>
    <p>Hello! As a volunteer, you've been granted the ability to create, edit, and delete event listings for The List NC. Wield your power with care and grace. Your contributions and efforts are greatly appreciated!</p>

    <section class="content">
        <div class="listings">
            <nav>
                <div class="sort-options">
                    <a class="sort-option" href="{% url 'dashboard' sorting='by-date'%}">By Date</a>
                    <span class="sort-option active">By Venue</span>
                </div>
                <div class="action-options">
                    <a class="new-event" href="{% url 'new_event_form' %}">Create new event</a>
                </div>
            </nav>

            {% for venue, events in grouped_events %}
                <h3>{{ venue }}</h3>
                {% for event in events %}
                    <div class="event-row">
                        <div class="event-info">
                            <span class="start-date">{{ event.start_date | date:"M d, Y" }} -</span>
                            <span class="title">{{ event }} @</span>
                            <span class="start-time">{{ event.start_date | date:"g:i A" }}</span>
        
                            {% if event.admission_price == 0 %}
                                <span class="admission">Free</span>
                            {% elif event.admission_price > 0 %}
                                <span class="admission">${{ event.admission_price }}</span>
                            {% endif %}
                        </div>
                        <a class="edit btn" href="{% url 'edit_event_form' uuid=event.uuid %}">Edit</a>
                    </div>
                {% endfor %}
            {% endfor %}
        </div>
    </section>
{% else %}
    <h1>Hey, you shouldn't be here!</h1>
{% endif %}

{% endblock content %}